# =============================================================================
# Portsie Environment Variables
# =============================================================================
# Copy this file to .env.local and fill in your values.
# .env.local is gitignored and will not be committed.

# -----------------------------------------------------------------------------
# Supabase (required)
# -----------------------------------------------------------------------------
# Client-side (public) — used by @supabase/ssr in browser
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key

# Server-side — used by admin client, version bump script, etc.
SUPABASE_URL=your-supabase-url
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# -----------------------------------------------------------------------------
# Encryption (required)
# -----------------------------------------------------------------------------
# AES-256-GCM key for encrypting per-user secrets in the database
# (Schwab tokens, Schwab credentials, LLM API keys)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SCHWAB_TOKEN_ENCRYPTION_KEY=your-64-char-hex-key

# -----------------------------------------------------------------------------
# Gemini / Google AI (required — default extraction engine)
# -----------------------------------------------------------------------------
# API key for Google Gemini 3 Flash — the default document extraction backend.
# All extractions use Gemini unless the user overrides to CLI or API mode.
# Get it from: https://aistudio.google.com/apikey (Portsie-Investor GCP project)
GEMINI_API_KEY=your-gemini-api-key

# -----------------------------------------------------------------------------
# LLM / Claude (fallback + per-user override)
# -----------------------------------------------------------------------------
# Anthropic API keys are stored per-user in the `llm_settings` table,
# encrypted with SCHWAB_TOKEN_ENCRYPTION_KEY. Users can override to
# CLI or API mode in Dashboard → Settings → LLM tab.
#
# No global ANTHROPIC_API_KEY is needed.
#
# Default: Gemini 3 Flash (server-side GEMINI_API_KEY)
# Fallback: Claude Sonnet 4.6 via CLI wrapper (auto on Gemini failure)
# Override: CLI mode or API mode (user's own Anthropic key)

# -----------------------------------------------------------------------------
# CLI Wrapper (required for fallback — Claude Sonnet 4.6 via DO)
# -----------------------------------------------------------------------------
# Shared secret for authenticating with the DO-hosted CLI wrapper service.
# Must match the AUTH_TOKEN in the CLI wrapper's .env on the server.
PORTSIE_CLI_AUTH_TOKEN=your-shared-secret

# Default CLI endpoint URL. The CLI wrapper runs Claude Sonnet 4.6 and serves
# as the automatic fallback when Gemini is unavailable.
PORTSIE_CLI_ENDPOINT=http://159.89.157.120:8910/extract

# -----------------------------------------------------------------------------
# Logo.dev (optional)
# -----------------------------------------------------------------------------
# Publishable key for Logo.dev API — serves company logos on brokerage selection.
# Get a free key at https://logo.dev/dashboard/api-keys
NEXT_PUBLIC_LOGO_DEV_TOKEN=your-logo-dev-publishable-key

# -----------------------------------------------------------------------------
# Quiltt Open Banking (required for bank/brokerage linking)
# -----------------------------------------------------------------------------
# API secret for server-side auth (session creation, GraphQL Basic Auth)
# Get from https://dashboard.quiltt.dev → API Keys
QUILTT_API_SECRET=your-quiltt-api-secret

# Webhook signature verification secret
# Generated when you create a webhook subscription in the Quiltt dashboard
QUILTT_WEBHOOK_SECRET=your-quiltt-webhook-secret

# Client-side connector ID — used by the Quiltt connector widget
# Get from https://dashboard.quiltt.dev → Connectors
NEXT_PUBLIC_QUILTT_CONNECTOR_ID=your-quiltt-connector-id
